@model IEnumerable<Clinic_web_app.Models.EcomerceOrder>
@{
    ViewData["Title"] = "Admin Index";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    List<EcomerceMedOrderDetail> firstDayOrder = ViewBag.OrderToday;
    decimal totalToday = 0;
    decimal totalDay2 = 0;
    decimal totalDay3 = 0;
    decimal totalDay4 = 0;
    decimal totalDay5 = 0;
    decimal totalDay6 = 0;
    decimal totalDay7 = 0;
    int pending = 0;
    int decline = 0;
    int completed = 0;
    foreach (var item in Model)
    {
        switch (item.Status)
        {
            case "Pending":
                {
                    pending++;
                    break;
                }
            case "Decline":
                {
                    decline++;
                    break;
                }
            case "Completed":
                {
                    completed++;
                    break;
                }
        }
    }
    double pendingRate = (double)pending / (double)(pending + decline + completed) * 100;
    double declineRate = (double)decline / (double)(pending + decline + completed) * 100;
    double completedRated = (double)completed / (double)(pending + decline + completed) * 100;
    foreach (var item in firstDayOrder)
    {
        totalToday += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> secondDayOrder = ViewBag.OrderDay2;
    foreach (var item in secondDayOrder)
    {
        totalDay2 += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> orderDay3 = ViewBag.OrderDay3;
    foreach (var item in orderDay3)
    {
        totalDay3 += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> orderDay4 = ViewBag.OrderDay4;
    foreach (var item in orderDay4)
    {
        totalDay4 += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> orderDay5 = ViewBag.OrderDay5;
    foreach (var item in orderDay5)
    {
        totalDay5 += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> orderDay6 = ViewBag.OrderDay6;
    foreach (var item in orderDay6)
    {
        totalDay6 += Convert.ToDecimal(item.Total);
    }
    List<EcomerceMedOrderDetail> orderDay7 = ViewBag.OrderDay7;
    foreach (var item in orderDay7)
    {
        totalDay7 += Convert.ToDecimal(item.Total);
    }
    decimal grandTotal = totalToday + totalDay2 + totalDay3 + totalDay4 + totalDay5 + totalDay6 + totalDay7;
    List<CustomerAccount> Register = ViewBag.Customer;
    List<StaffAccount> Staff = ViewBag.Staff;
}
<!-- Preloader -->
<div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="~/assets/img/logo1.png" alt="KiviCareLogo" weight="100">
</div>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Dashboard</h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Dashboard v1</li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->
    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
            <!-- Small boxes (Stat box) -->
            <div class="row">
                <div class="col-lg-3 col-6">
                    <!-- small box -->
                    <div class="small-box bg-info">
                        <div class="inner">
                            <h3>@grandTotal</h3>

                            <p>Total income in 7 days</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-bag"></i>
                        </div>
                        <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                    <!-- small box -->
                    <div class="small-box bg-success">
                        <div class="inner">
                            <h3>@pendingRate<sup style="font-size: 20px">%</sup></h3>

                            <p>Pending Order Rate</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-stats-bars"></i>
                        </div>
                        <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                    <!-- small box -->
                    <div class="small-box bg-warning">
                        <div class="inner">
                            <h3>@Register.Count</h3>

                            <p>User Registrations</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-person-add"></i>
                        </div>
                        <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                    <!-- small box -->
                    <div class="small-box bg-danger">
                        <div class="inner">
                            <h3>@Staff.Count</h3>

                            <p>Staff Account availables</p>
                        </div>
                        <div class="icon">
                            <i class="ion ion-pie-graph"></i>
                        </div>
                        <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <!-- ./col -->
            </div>
            <!-- /.row -->
            <!-- Main row -->
            <div class="row">
                <!-- Left col -->
                <section class="col-lg-7 connectedSortable">
                    <!-- Custom tabs (Charts with tabs)-->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-pie mr-1"></i>
                                Sales
                            </h3>
                            <div class="card-tools">
                                <ul class="nav nav-pills ml-auto">
                                    <li class="nav-item">
                                        <a class="nav-link active" href="#revenue-chart" data-toggle="tab">Incomes In 7 Days</a>
                                    </li>
                                </ul>
                            </div>
                        </div><!-- /.card-header -->
                        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
                        <div class="card-body">
                            <div class="tab-content p-0">
                                <div id="chartContainer" style="height: 370px; width: 100%;"></div>
                            </div>
                        </div><!-- /.card-body -->
                    </div>
                    <!--chart income script-->
                    <script>
                        window.onload = function () {

                var chart = new CanvasJS.Chart("chartContainer", {
                                exportEnabled: true,
                                animationEnabled: true,
                                theme: "light2",
                                title: {
                                    text: "Income in 7 Days"
                                },
                                data: [{
                                    type: "line",
                                    indexLabel :"{y} $",
                                    indexLabelFontSize: 16,
                                    dataPoints: [
                                        { x: 1, y: @totalToday ,label:"Today" },
                                        { x: 2, y: @totalDay2 ,label :"Day 2"},
                                        { x: 3, y: @totalDay3 ,label :"Day 3"},
                                        { x: 4, y: @totalDay4 ,label :"Day 4"},
                                        { x: 5, y: @totalDay5 ,label :"Day 5"},
                                        { x: 6, y: @totalDay6 ,label :"Day 6"},
                                        { x: 7, y: @totalDay7 ,label :"Day 7"}
                                    ]
                                }]
                            });
                            chart.render();

                            var chartOrder = new CanvasJS.Chart("chartOrder", {
                                theme: "light2", // "light1", "light2", "dark1", "dark2"
                                exportEnabled: true,
                                animationEnabled: true,

                                data: [{
                                    type: "pie",
                                    startAngle: 25,
                                    toolTipContent: "<b>{label}</b>: {y}%",
                                    showInLegend: "true",
                                    legendText: "{label}",
                                    indexLabelFontSize: 16,
                                    indexLabel: "{label} - {y}%",
                                    dataPoints: [
                                        { y: @pendingRate, label: "Pending" },
                                        { y: @declineRate, label: "Decline" },
                                        { y: @completedRated, label: "Completed" }

                                    ]
                                }]
                            });
    chartOrder.render();
                        }

                    </script>
                    <!-- /.card -->
                    <!-- DIRECT CHAT -->
                    <div class="card direct-chat direct-chat-primary">
                        <div class="card-header">
                            <h3 class="card-title">Direct Chat</h3>


                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">

                        </div>
                        <!-- /.card-body -->
                        <div class="card-footer">

                        </div>
                        <!-- /.card-footer-->
                    </div>
                    <!--/.direct-chat -->
                    <!-- TO DO List -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="ion ion-clipboard mr-1"></i>
                                To Do List
                            </h3>


                        </div>
                        <!-- /.card-header -->
                        <div class="card-body">

                        </div>
                        <!-- /.card-body -->
                        <div class="card-footer clearfix">

                        </div>
                    </div>
                    <!-- /.card -->
                </section>
                <!-- /.Left col -->
                <!-- right col (We are only adding the ID to make the widgets sortable)-->
                <section class="col-lg-5 connectedSortable">

                    <!-- Map card -->
                    <div class="card bg-gradient-primary">
                        <div class="card-header border-0">
                            <h3 class="card-title">
                                <i class="fas fa-map-marker-alt mr-1"></i>
                                Orders Status Rate
                            </h3>

                        </div>
                        <div class="card-body">
                            <div id="chartOrder" style="height: 370px; width: 100%;"></div>
                        </div>
                        <!-- /.card-body-->

                    </div>

                    <!-- /.card -->
                    <!-- solid sales graph -->
                    <div class="card bg-gradient-info">
                        <div class="card-header border-0">
                            <h3 class="card-title">
                                <i class="fas fa-th mr-1"></i>
                                Sales Graph
                            </h3>

                            <div class="card-tools">
                                <button type="button" class="btn bg-info btn-sm" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn bg-info btn-sm" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas class="chart" id="line-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                        </div>
                        <!-- /.card-body -->
                        <div class="card-footer bg-transparent">
                            <div class="row">
                                <div class="col-4 text-center">
                                    <input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60"
                                           data-fgColor="#39CCCC">

                                    <div class="text-white">Mail-Orders</div>
                                </div>
                                <!-- ./col -->
                                <div class="col-4 text-center">
                                    <input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60"
                                           data-fgColor="#39CCCC">

                                    <div class="text-white">Online</div>
                                </div>
                                <!-- ./col -->
                                <div class="col-4 text-center">
                                    <input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60"
                                           data-fgColor="#39CCCC">

                                    <div class="text-white">In-Store</div>
                                </div>
                                <!-- ./col -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.card-footer -->
                    </div>
                    <!-- /.card -->
                    <!-- Calendar -->
                    <div class="card bg-gradient-success">
                        <div class="card-header border-0">

                            <h3 class="card-title">
                                <i class="far fa-calendar-alt"></i>
                                Calendar
                            </h3>
                            <!-- tools card -->
                            <div class="card-tools">
                                <!-- button with a dropdown -->
                                <div class="btn-group">
                                    <button type="button" class="btn btn-success btn-sm dropdown-toggle" data-toggle="dropdown" data-offset="-52">
                                        <i class="fas fa-bars"></i>
                                    </button>
                                    <div class="dropdown-menu" role="menu">
                                        <a href="#" class="dropdown-item">Add new event</a>
                                        <a href="#" class="dropdown-item">Clear events</a>
                                        <div class="dropdown-divider"></div>
                                        <a href="#" class="dropdown-item">View calendar</a>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-success btn-sm" data-card-widget="collapse">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-success btn-sm" data-card-widget="remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <!-- /. tools -->
                        </div>
                        <!-- /.card-header -->
                        <div class="card-body pt-0">
                            <!--The calendar -->
                            <div id="calendar" style="width: 100%"></div>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </section>
                <!-- right col -->
            </div>
            <!-- /.row (main row) -->
        </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
</div>

